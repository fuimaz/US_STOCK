# äº¤äº’å¼Kçº¿å›¾åŠŸèƒ½è¯´æ˜Ž

## åŠŸèƒ½æ¦‚è¿°

### äº¤äº’å¼Kçº¿å›¾æŸ¥çœ‹å™¨
å®Œå…¨äº¤äº’å¼çš„Kçº¿å›¾æŸ¥çœ‹å™¨ï¼Œæ”¯æŒï¼š
- ðŸ–±ï¸ **é¼ æ ‡æ‹–æ‹½**: å·¦å³æ‹–åŠ¨æŸ¥çœ‹ä¸åŒæ—¶é—´æ®µçš„Kçº¿
- ðŸ”„ **æ»šè½®ç¼©æ”¾**: å‘ä¸Š/å‘ä¸‹æ»šåŠ¨è°ƒæ•´æ˜¾ç¤ºçš„Kçº¿æ•°é‡
- ðŸ“Š **æ‚¬åœ/ç‚¹å‡»æŸ¥çœ‹**: é¼ æ ‡æ‚¬åœæˆ–ç‚¹å‡»Kçº¿æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
- ðŸ“ˆ **å®žæ—¶æ›´æ–°**: æ‹–æ‹½å’Œç¼©æ”¾æ—¶å®žæ—¶æ›´æ–°å›¾è¡¨

### æ˜¾ç¤ºçš„è¯¦ç»†ä¿¡æ¯
å½“é¼ æ ‡æ‚¬åœæˆ–ç‚¹å‡»Kçº¿æ—¶ï¼Œä¼šæ˜¾ç¤ºä»¥ä¸‹å®Œæ•´ä¿¡æ¯ï¼š
- æ—¥æœŸ
- å¼€ç›˜ä»·
- æœ€é«˜ä»·
- æœ€ä½Žä»·
- æ”¶ç›˜ä»·
- æ¶¨è·Œé¢å’Œæ¶¨è·Œå¹…
- æˆäº¤é‡
- **BOLLä¸Šè½¨**
- **BOLLä¸­è½¨**
- **BOLLä¸‹è½¨**
- **RSIæŒ‡æ ‡å€¼**

## ä½¿ç”¨æ–¹æ³•

### äº¤äº’å¼æŸ¥çœ‹å™¨

```bash
# åŸºæœ¬ä½¿ç”¨
python interactive_kline.py -s AAPL

# æŒ‡å®šè‚¡ç¥¨ä»£ç 
python interactive_kline.py -s MSFT

# æŒ‡å®šæ•°æ®å‘¨æœŸ
python interactive_kline.py -s GOOGL -p 2y

# ä¸ä½¿ç”¨ç¼“å­˜
python interactive_kline.py -s NVDA --no-cache
```

### Pythonä»£ç è°ƒç”¨

```python
from data_fetcher import DataFetcher
from interactive_kline import InteractiveKLineViewer

# èŽ·å–æ•°æ®
fetcher = DataFetcher(cache_dir='data_cache', cache_days=1)
data = fetcher.fetch_stock_data('AAPL', period='1y')

# åˆ›å»ºäº¤äº’å¼æŸ¥çœ‹å™¨
viewer = InteractiveKLineViewer(data, title='AAPL äº¤äº’å¼Kçº¿å›¾')
viewer.show()
```

## æ“ä½œè¯´æ˜Ž

### äº¤äº’å¼æŸ¥çœ‹å™¨æ“ä½œ

1. **é¼ æ ‡æ‹–æ‹½**
   - åœ¨Kçº¿å›¾åŒºåŸŸæŒ‰ä¸‹é¼ æ ‡å·¦é”®
   - å·¦å³æ‹–åŠ¨æŸ¥çœ‹ä¸åŒæ—¶é—´æ®µçš„æ•°æ®
   - é‡Šæ”¾é¼ æ ‡åœæ­¢ç§»åŠ¨

2. **æ»šè½®ç¼©æ”¾**
   - å°†é¼ æ ‡æ”¾åœ¨Kçº¿å›¾åŒºåŸŸ
   - å‘ä¸Šæ»šåŠ¨ï¼šå‡å°‘æ˜¾ç¤ºçš„Kçº¿æ•°é‡ï¼ˆæ”¾å¤§ï¼‰
   - å‘ä¸‹æ»šåŠ¨ï¼šå¢žåŠ æ˜¾ç¤ºçš„Kçº¿æ•°é‡ï¼ˆç¼©å°ï¼‰
   - é»˜è®¤æ˜¾ç¤º60æ ¹Kçº¿ï¼ŒèŒƒå›´20-å…¨éƒ¨æ•°æ®

3. **é¼ æ ‡æ‚¬åœ/ç‚¹å‡»**
   - å°†é¼ æ ‡æ‚¬åœåœ¨ä»»æ„Kçº¿ä¸Šï¼Œæˆ–ç‚¹å‡»Kçº¿
   - è‡ªåŠ¨æ˜¾ç¤ºè¯¥Kçº¿çš„å®Œæ•´ä¿¡æ¯
   - ä¿¡æ¯åŒ…æ‹¬ï¼šæ—¥æœŸã€OHLCVã€æ¶¨è·Œå¹…ã€BOLLã€RSI
   - æç¤ºæ¡†ä¼šæ ¹æ®ä½ç½®è‡ªåŠ¨è°ƒæ•´æ˜¾ç¤ºä½ç½®

## åŠŸèƒ½ç‰¹æ€§

### æ™ºèƒ½æç¤ºæ¡†
- **ä½ç½®è‡ªé€‚åº”**: æ ¹æ®Kçº¿ä½ç½®è‡ªåŠ¨è°ƒæ•´æç¤ºæ¡†æ˜¾ç¤ºä½ç½®
- **é¿å…é®æŒ¡**: åœ¨å³ä¾§Kçº¿æ—¶ï¼Œæç¤ºæ¡†æ˜¾ç¤ºåœ¨å·¦ä¾§
- **å®Œæ•´ä¿¡æ¯**: æ˜¾ç¤ºæ‰€æœ‰å…³é”®æŒ‡æ ‡ï¼ŒåŒ…æ‹¬BOLLå’ŒRSI
- **å®žæ—¶è®¡ç®—**: BOLLå’ŒRSIæ ¹æ®å½“å‰Kçº¿å®žæ—¶è®¡ç®—

### æ€§èƒ½ä¼˜åŒ–
- **ç¼“å­˜æœºåˆ¶**: é¿å…é‡å¤è®¡ç®—ç›¸åŒç´¢å¼•çš„ä¿¡æ¯
- **æŒ‰éœ€æ›´æ–°**: åªåœ¨ç´¢å¼•å˜åŒ–æ—¶æ›´æ–°æç¤ºæ¡†
- **å¹³æ»‘åŠ¨ç”»**: ä½¿ç”¨draw_idle()å®žçŽ°å¹³æ»‘æ›´æ–°

## æŠ€æœ¯å®žçŽ°

### BOLLæŒ‡æ ‡è®¡ç®—
```python
# è®¡ç®—å¸ƒæž—å¸¦
data_subset = self.data.iloc[:idx+1]
bb_middle = data_subset['Close'].rolling(window=20).mean().iloc[-1]
bb_std = data_subset['Close'].rolling(window=20).std().iloc[-1]
bb_upper = bb_middle + bb_std * 2
bb_lower = bb_middle - bb_std * 2
```

### RSIæŒ‡æ ‡è®¡ç®—
```python
# è®¡ç®—RSI
delta = data_subset['Close'].diff()
gain = (delta.where(delta > 0, 0)).rolling(window=14).mean().iloc[-1]
loss = (-delta.where(delta < 0, 0)).rolling(window=14).mean().iloc[-1]
rs = gain / loss if loss != 0 else 0
rsi = 100 - (100 / (1 + rs)) if not pd.isna(rs) else 50
```

### é¼ æ ‡äº‹ä»¶å¤„ç†
```python
def _on_press(self, event):
    """é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶ - æ”¯æŒç‚¹å‡»æ˜¾ç¤ºä¿¡æ¯"""
    if event.inaxes == self.axes[0]:
        self.is_dragging = True
        self.last_x = event.xdata
        # ç‚¹å‡»Kçº¿æ˜¾ç¤ºä¿¡æ¯
        idx = int(round(event.xdata))
        if 0 <= idx < len(self.data):
            self._show_tooltip(event, idx)

def _on_motion(self, event):
    """é¼ æ ‡ç§»åŠ¨äº‹ä»¶ - æ”¯æŒæ‚¬åœæ˜¾ç¤ºä¿¡æ¯"""
    if self.is_dragging and event.inaxes == self.axes[0]:
        # æ‹–æ‹½é€»è¾‘
        pass
    # é¼ æ ‡æ‚¬åœæ˜¾ç¤ºä¿¡æ¯
    if event.inaxes == self.axes[0] and not self.is_dragging:
        idx = int(round(event.xdata))
        if 0 <= idx < len(self.data):
            self._show_tooltip(event, idx)
```

## ç¤ºä¾‹ä»£ç 

è¿è¡Œç¤ºä¾‹ï¼š
```bash
# äº¤äº’å¼æŸ¥çœ‹å™¨ç¤ºä¾‹
python example_interactive.py
```

## æ³¨æ„äº‹é¡¹

1. **å­—ä½“é—®é¢˜**: å¦‚æžœç³»ç»Ÿä¸­æ²¡æœ‰å®‰è£…ä¸­æ–‡å­—ä½“ï¼Œå¯èƒ½ä¼šæ˜¾ç¤ºæ–¹æ¡†ã€‚å»ºè®®å®‰è£…å¾®è½¯é›…é»‘æˆ–é»‘ä½“ã€‚
2. **æ€§èƒ½**: äº¤äº’å¼æŸ¥çœ‹å™¨åœ¨æ•°æ®é‡è¾ƒå¤§æ—¶å¯èƒ½ä¼šæœ‰å»¶è¿Ÿï¼Œå»ºè®®ä½¿ç”¨ç¼“å­˜æ•°æ®ã€‚
3. **å…¼å®¹æ€§**: äº¤äº’å¼åŠŸèƒ½éœ€è¦åœ¨æ”¯æŒmatplotlibäº¤äº’çš„åŽç«¯çŽ¯å¢ƒä¸­è¿è¡Œï¼ˆå¦‚TkAggã€Qt5Aggç­‰ï¼‰ã€‚
4. **BOLLå’ŒRSI**: å‰20ä¸ªKçº¿ï¼ˆBOLLï¼‰å’Œå‰14ä¸ªKçº¿ï¼ˆRSIï¼‰çš„æŒ‡æ ‡å¯èƒ½ä¸å®Œæ•´ã€‚

## åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½ | äº¤äº’å¼æŸ¥çœ‹å™¨ |
|------|------------|
| æ˜¾ç¤ºKçº¿å›¾ | âœ… |
| æ˜¾ç¤ºå¸ƒæž—å¸¦ | âœ… |
| æ˜¾ç¤ºRSI | âœ… |
| æ˜¾ç¤ºæˆäº¤é‡ | âœ… |
| é¼ æ ‡æ‚¬åœæŸ¥çœ‹ä¿¡æ¯ | âœ… |
| é¼ æ ‡ç‚¹å‡»æŸ¥çœ‹ä¿¡æ¯ | âœ… |
| æ˜¾ç¤ºBOLLæ•°å€¼ | âœ… |
| æ˜¾ç¤ºRSIæ•°å€¼ | âœ… |
| é¼ æ ‡æ‹–æ‹½ç§»åŠ¨ | âœ… |
| æ»šè½®ç¼©æ”¾ | âœ… |
| å®žæ—¶æ›´æ–° | âœ… |
